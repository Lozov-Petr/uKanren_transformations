\section{Classic relational conjunction}

\begin{figure}[h!]
\[
union(T_1, T_2) =
\left\{
\begin{array}{rl}
T_2, & \mbox{if } T_1 = \emptyset \\
T_1, & \mbox{if } T_1 \not= \emptyset \mbox{ and } T_2 = \emptyset \\
(T_1 \circ T_2), & \mbox{otherwise}
\end{array}
\right.
\]
\caption{union-semantics}
\label{fair:union-semantics}
\end{figure}

\begin{figure}[h!]
\[
push(C, T) =
\left\{
\begin{array}{rl}
(\sigma, i, c_1 : \ldots : c_i : \bar{c_1} : \ldots : \bar{c_k} : cs), & \mbox{if } T = (\sigma, i, \bar{c_1} : \ldots : \bar{c_k} : \epsilon) \mbox{ and } C = c_1 : \ldots : c_i : \Box : cs \\
(push(C, T_1) \circ push(C, T_2)), & \mbox{if } T = (T_1 \circ T_2)
\end{array}
\right.
\]
\caption{union-semantics}
\label{fair:union-semantics}
\end{figure}

\begin{figure}[h!]
\[\begin{array}{cr}

\dfrac{\delta(f) = \bar{x}. b \qquad (\sigma, i, \epsilon) \vdash b[\bar{x} \leftarrow \bar{t}] \leadsto T}
      {(\sigma, i) \vdash f(\bar{t}) \Rightarrow T}
&     \ruleno{Unfold} \\[3mm]
\dfrac{\not\exists \, mgu(t_1, t_2, \sigma)}
      {(\sigma, i, cs) \vdash (t_1 \equiv t_2) \leadsto \emptyset}
&     \ruleno{UnifyFail}  \\[3mm]
\dfrac{\bar\sigma = mgu(t_1, t_2, \sigma)}
      {(\sigma, i, cs) \vdash (t_1 \equiv t_2) \leadsto (i, \, \bar\sigma, \, cs)}
&     \ruleno{UnifySuccess}  \\[3mm]
      {(\sigma, i, cs) \vdash f(\bar{t}) \leadsto (i, \, \sigma, \, f(\bar{t}) : cs)}
&     \ruleno{Invoke} \\[3mm]
\dfrac{(\sigma, i+1, cs) \vdash g[x \leftarrow \alpha_i] \leadsto T}
      {(\sigma, i, cs) \vdash (\mbox{\lstinline|fresh|} \, x. \, g) \leadsto T}
&     \ruleno{Fresh}  \\[3mm]
\dfrac{(\sigma, i, cs) \vdash g_1 \leadsto T_1 \qquad (\sigma, i, cs) \vdash g_2 \leadsto T_1}
      {(\sigma, i, cs) \vdash (g_1 \lor g_2) \leadsto union(T_1, T_2)}
&     \ruleno{DisjGoal}  \\[3mm]
\dfrac{T_1 \vdash g \leadsto T_3 \qquad T_2 \vdash g \leadsto T_4}
      {(T_1 \circ T_2) \vdash g \leadsto union(T_3, T_4)}
&     \ruleno{DisjTree}  \\[3mm]
\dfrac{(\sigma, i, cs) \vdash g_1 \leadsto \emptyset}
      {(\sigma, i, cs) \vdash (g_1 \land g_2) \leadsto \emptyset}
&     \ruleno{ConjFail}  \\[3mm]
\dfrac{(\sigma, i, cs) \vdash g_1 \leadsto T \qquad push(\Box : cs, T) \vdash g_2 \leadsto \bar{T}}
      {(\sigma, i, cs) \vdash (g_1 \land g_2) \leadsto \bar{T}}
&     \ruleno{ConjSuccess}  \\[3mm]
\end{array}\]

\caption{Unfolding-semantics}
\label{fair:unfolding-semantics}
\end{figure}

\begin{figure}[h!]
\[\begin{array}{cr}

      {(\sigma, i, \epsilon) \xrightarrow{(\sigma, i)} \circ}  
&     \ruleno{Answer} \\[2mm]
\dfrac{(\sigma, i) \vdash c \Rightarrow T}
      {(\sigma, i, c : cs) \xrightarrow{\circ} push(\Box : cs, T)}
&     \ruleno{ConjUnfold} \\[2mm]
\dfrac{T_1 \xrightarrow{\alpha} \circ}
      {(T_1 \lor T_2) \xrightarrow{\alpha} T_2}
&     \ruleno{Disj} \\[4mm]
\dfrac{T_1 \xrightarrow{\alpha} \bar{T_1}}
      {(T_1 \lor T_2) \xrightarrow{\alpha} (T_2 \lor\bar{T_1})}
&     \ruleno{DisjStep} \\[4mm]
\end{array}\]
\caption{Classic semantics}
\label{fair:classic-semantics}
\end{figure}

\begin{figure}
\centering
\begin{tabular}{c}
\begin{lstlisting}
let rec append$^o$ x y xy =
  (x === [] /\ y === xy) \/
  fresh (e xs xys)
    (x === e : xs /\ 
     xs === e : xys /\ 
     append$^o$ xs y xys)
    
let rec revers$^o$ x y =
  (x === [] /\ y === []) \/
  fresh (e xs ys)
    (x === e : xs /\ 
     append$^o$ ys [e] y /\
     revers$^o$ xs ys)
\end{lstlisting}
\end{tabular}

\caption{Relational program to list reversing}
\label{fair:lst-reverso}
\end{figure}

\FloatBarrier